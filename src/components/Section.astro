---
interface Props {
  title?: string;
  icon?: string;
  iconColor?: string;
  intro?: boolean;
  id?: string;
  'data-section'?: string;
}

const {
  title,
  icon,
  iconColor,
  intro = false,
  id,
  'data-section': dataSection,
} = Astro.props;

// id が未指定の場合、title から自動生成（日本語対応のスラッグ化）
const resolvedId = id ?? (title
  ? `section-${title.toLowerCase().replace(/[\s　]+/g, '-').replace(/[^\w\u3040-\u309F\u30A0-\u30FF\u4E00-\u9FFF-]/g, '')}`
  : undefined);

// data-section が未指定の場合、title をそのまま使用
const resolvedDataSection = dataSection ?? title ?? undefined;

const wrapperClass = intro
  ? 'bg-blue-50 rounded-lg p-8 mb-8 border-l-4 border-blue-500 border border-blue-200'
  : 'bg-white rounded-lg p-8 mb-8 border border-gray-200';

const headingClass = intro
  ? 'text-2xl font-bold mb-4 text-blue-700 flex items-center gap-2'
  : 'text-2xl font-bold mb-6 pb-3 border-b-2 border-gray-200 text-gray-800 flex items-center gap-2';

const resolvedIconColor = iconColor ?? (intro ? 'text-blue-500' : 'text-blue-600');
const resolvedIcon = icon ?? (intro ? 'lightbulb' : 'info');
---

<div class={wrapperClass} id={resolvedId} data-section={resolvedDataSection}>
  {title && (
    <h2 class={headingClass}>
      <span class={`material-symbols-outlined ${resolvedIconColor}`}>{resolvedIcon}</span>
      {title}
    </h2>
  )}
  <slot />
</div>
